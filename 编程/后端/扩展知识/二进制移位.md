# 二进制移位"<<&>>&>>>"

## 前言

几乎所有语言都提供了二进制移位。

二进制移位在一定程度上可以对基本类型的数据做扩容，例如：StringBuffer、StringBuilder

### 二进制移位符号有：

1. `>>`算术右移操作符------（绝对值减小）
2. `<<`算术左移操作符------（绝对值增大）
3. `>>>`无符号逻辑右移操作符------（正数减少，负数增大）
4. 没有无符号逻辑左移操作符，因为它和算术左移操作符一致

## 原理

基本数据分为正数和负数

### 1.正数移位：

1. （当前正数）
2. 转二进制（得到当前正数的二进制）
3. 移位（得到移位后正数的二进制）
4. 转十进制（移位后正数的十进制结果）

### 2.负数移位：

正常情况下(除逻辑移位外)，负数移位需要：

1. （当前负数）
2. 取正
3. 转二进制
4. 取反
5. +1（得到当前负数的二进制）
6. 移位（得到移位后负数的二进制）
7. -1
8. 取反
9. 转十进制
10. 加符号（移位后的负数十进制结果）

![img](https://exp-picture.cdn.bcebos.com/340e4eb8b43ea8db42fc9387189c2cf7deb2160f.jpg?x-bce-process=image%2Fresize%2Cm_lfit%2Cw_500%2Climit_1%2Fformat%2Cf_auto%2Fquality%2Cq_80)

![img](https://exp-picture.cdn.bcebos.com/def3c219ce2c5b1b03689d692b39131fcfec0e0f.jpg?x-bce-process=image%2Fresize%2Cm_lfit%2Cw_500%2Climit_1%2Fformat%2Cf_auto%2Fquality%2Cq_80)

## 实例

### 1.算术右移操作符`>>`

<u>向右移位：-->往右退N位，左补右删</u>

![img](https://exp-picture.cdn.bcebos.com/d2987775f2c4ec997ff56db4c3fe1e425c6b070f.jpg?x-bce-process=image%2Fresize%2Cm_lfit%2Cw_500%2Climit_1%2Fformat%2Cf_auto%2Fquality%2Cq_80)

#### 正数：

<u>正数移位需要（转二进制、移位）</u>

```java
int i = 10; // 整形四字节32位
/*
 正数i的完整二进制: {0000 0000 | 0000 0000 | 0000 0000 | 0000 1010}
 */
System.out.println("i的十进制为：" + i + ";i的二进制为：" + Integer.toBinaryString(i));
i >>= 2;// i = i >> 10向右移2位
/*
 正数i向右移2(N)位后的二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 0010} "低位删除,高位补零"
 转化十进制：2
 */
System.out.println("i算术右移后的十进制为：" + i + ";i算术右移后的二进制为：" + Integer.toBinaryString(i));
```

#### 负数：

<u>负数移位需要（取正、转二进制、取反、+1、移位、-1、取反、加符号）</u>

```java
int j = -10;
/*
 负数j取正：10
 负数j的二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 1010}
 负数j二进制取反：{1111 1111 | 1111 1111 | 1111 1111 | 1111 0101}
 负数j二进制+1：{1111 1111 | 1111 1111 | 1111 1111 | 1111 0110}
 */
System.out.println("负数j的十进制为：" + j + ";负数j的二进制为：" + Integer.toBinaryString(j));
j >>= 2;
/*
 负数j二进制移位：{1111 1111 | 1111 1111 | 1111 1111 | 1111 1101}
 负数j二进制-1：{1111 1111 | 1111 1111 | 1111 1111 | 1111 1100}
 负数j二进制取反：{0000 0000 | 0000 0000 | 0000 0000 | 0000 0011}
 负数j加符号：-3
 */
System.out.println("负数j算术右移后的十进制为：" + j + ";负数j算术右移后的二进制为：" + Integer.toBinaryString(j));
```

### 2.算术左移操作符`<<`

<u>向左移位：<--往左推，左删右补</u>

![img](https://exp-picture.cdn.bcebos.com/974a2f21056104a3175fea1b63d7592ae2ef6b0f.jpg?x-bce-process=image%2Fresize%2Cm_lfit%2Cw_500%2Climit_1%2Fformat%2Cf_auto%2Fquality%2Cq_80)

#### 正数：

<u>正数移位需要（转二进制、移位）</u>

```java
int k = 10;
/*
 正数k的二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 1010}
 */
System.out.println("k的十进制为：" + k + ";k的二进制为：" + Integer.toBinaryString(k));
k <<= 2;// 向左移位
/*
 正数k向左移位：{0000 0000 | 0000 0000 | 0000 0000 | 0010 1000}
 转化十进制：40
 */
System.out.println("k算术左移后的十进制为：" + k + ";k算术左移后的二进制为：" + Integer.toBinaryString(k));
```

#### 负数：

<u>负数移位需要（取正、转二进制、取反、+1、移位、-1、取反、加符号）</u>

```java
int l = -10;
/*
 负数l取正：10
 负数l的二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 1010}
 负数l二进制取反：{1111 1111 | 1111 1111 | 1111 1111 | 1111 0101}
 负数l二进制+1：{1111 1111 | 1111 1111 | 1111 1111 | 1111 0110}得到移位前的二进制
 */
System.out.println("负数l的十进制为：" + l + ";负数l的二进制为：" + Integer.toBinaryString(l));
l <<= 2;
/*
 负数l二进制移位：{1111 1111 | 1111 1111 | 1111 1111 | 1101 1000}得到移位后的二进制
 负数l二进制-1：{1111 1111 | 1111 1111 | 1111 1111 | 1101 0111}
 负数l二进制取反：{0000 0000 | 0000 0000 | 0000 0000 | 0010 1000}
 负数l加符号：-40 得到最终十进制结果
 */
System.out.println("负数l算术左移后的十进制为：" + l + ";负数l算术左移后的二进制为：" + Integer.toBinaryString(l));
```

### 3.无符号逻辑右移操作符`>>>`

无符号逻辑右移操作符不需要考虑正负号问题

![img](https://exp-picture.cdn.bcebos.com/31097f43d7d44831585d9f12d40f822b75ee510f.jpg?x-bce-process=image%2Fresize%2Cm_lfit%2Cw_500%2Climit_1%2Fformat%2Cf_auto%2Fquality%2Cq_80)

#### 正数：

<u>正数移位需要（转二进制、移位）</u>

```java
int m = 10;
/*
 m的二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 1010}
 */
System.out.println("m的十进制为：" + m + ";m的二进制为：" + Integer.toBinaryString(m));
m >>>= 2;
/*
 m逻辑右移后二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 0010}
 转化10进制：2
 */
System.out.println("m逻辑右移后的十进制为：" + m + ";m逻辑右移后后的二进制为：" + Integer.toBinaryString(m));
```

#### 负数：

<u>负数移位需要（取正、转二进制、取反、+1、移位）</u>

```java
int n = -10;
/*
 负数n取正：10
 负数n二进制：{0000 0000 | 0000 0000 | 0000 0000 | 0000 1010}
 负数n二进制取反：{1111 1111 | 1111 1111 | 1111 1111 | 1111 0101}
 负数n二进制+1：{1111 1111 | 1111 1111 | 1111 1111 | 1111 0110}得到移位前的二进制
 */
System.out.println("负数n的十进制为：" + n + ";负数n的二进制为：" + Integer.toBinaryString(n));
n >>>= 2;
/*
 负数n逻辑右移：{1111 1111 | 1111 1111 | 1111 1111 | 1111 1101}得到移位后的二进制
 负数n十进制：1073741821
 不考虑符号直接转换十进制结果
 */
System.out.println("负数n逻辑右移后后的十进制为：" + n + ";负数n逻辑右移后后的二进制为：" + Integer.toBinaryString(n));
```

